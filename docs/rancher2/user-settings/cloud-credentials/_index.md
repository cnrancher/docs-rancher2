---
title: 管理云凭证
description: 当您创建集群时，需要用到[节点模板](/docs/cluster-provisioning/rke-clusters/node-pools/_index)创建集群内的节点。这些模板使用 Docker Machine 中可用的配置选项，定义节点上的操作系统的镜像和配置参数。主机节点可以使用云凭证访问基础设施提供商，并创建节点。一个云凭证可用于多个节点模板。云凭证的优势是，使用同一个云服务提供商创建多个节点模板时，您不需要重复输入多次认证信息。云凭证以 Kubernetes 密文的方式存储。
keywords:
  - rancher 2.0中文文档
  - rancher 2.x 中文文档
  - rancher中文
  - rancher 2.0中文
  - rancher2
  - rancher教程
  - rancher中国
  - rancher 2.0
  - rancher2.0 中文教程
  - 用户设置
  - 管理云凭证
---

_v2.2.0 或更新版可用_

## 概述

当您创建集群时，需要用到[节点模板](/docs/rancher2/cluster-provisioning/rke-clusters/node-pools/_index)创建集群内的节点。这些模板使用 Docker Machine 中可用的配置选项，定义节点上的操作系统的镜像和配置参数。

主机节点可以使用云凭证访问基础设施提供商，并创建节点。一个云凭证可用于多个节点模板。云凭证的优势是，使用同一个云服务提供商创建多个节点模板时，您不需要重复输入多次认证信息。云凭证以 Kubernetes 密文的方式存储。

云凭证只能在有`password`类型字段的节点模板里使用。在默认处于`active`状态的节点驱动里，它们的账号相关字段都是`password`类型。但是在一些默认处于`inactive`状态的节点驱动里，我们还没有将它们的账号相关字段转换为`password`类型。所以它们暂时还不支持使用云凭证。

您可以在以下两种场景中创建云凭证：

- 为集群创建节点模板时，创建云凭证，详情请参考[创建节点模板](/docs/rancher2/cluster-provisioning/rke-clusters/node-pools/_index)。

- 在**用户设置**中创建云凭证。

> **说明：** 云凭证与创建该凭证的用户绑定，用户之间不可用分享凭证。

## 创建云凭证

1.  单击页面右上方的 **用户头像**，选择 **云凭证**。
1.  单击**添加云凭证**。
1.  输入凭证名称。
1.  从下拉菜单选择一个云凭证类型。可选的类型由 Rancher 内状态为`active`的[节点驱动](/docs/rancher2/admin-settings/drivers/node-drivers/_index)决定。
1.  输入认证信息。
1.  单击**创建**，添加新的云凭证。

**结果：** 添加了新的云凭证，[创建节点模板](/docs/rancher2/cluster-provisioning/rke-clusters/node-pools/_index)时可以使用该凭证。

## 更新云凭证

当访问凭证信息泄露或被修改过后，更新云凭证允许您在替换这些认证信息的同时，保留相同的节点模板。

1. 单击页面右上方的 **用户头像**，选择 **云凭证**。
1. 选择您需要更新的云凭证，单击 **... > 编辑**。
1. 输入最新的云凭证信息，单击 **保存**，完成更新。

**结果：** 完成云凭证更新。新建节点时，所有的主机节点都会自动使用更新后的云凭证。

## 删除云凭证

删除云凭证前，请确保所有节点模板都已经不再使用该凭证。如果出现删除凭证失败的场景，则表示还有节点模板在使用该凭证。请先删除正在使用该凭证的所有节点模板，详情请参考[删除节点模板](/docs/rancher2/user-settings/node-templates/_index)。

1. 单击页面右上方的 **用户头像**，选择 **云凭证**。

1. 删除单个云凭证或批量删除云凭证

   - 选择您需要更新的云凭证，单击 **... > 删除**。
   - 勾选多个云凭证，单击**删除**。

1. 单击 **确认**，删除选定的云凭证。

**结果：** 已删除选定的云凭证。
