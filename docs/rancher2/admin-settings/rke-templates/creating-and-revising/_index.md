---
title: 创建和修改模板
description: 本节介绍如何管理 RKE 模板和修订版。您可以在全局视图下的工具 > RKE 集群模板中创建，共享，更新和删除模板。模板更新通过修订系统进行处理。模板所有者想要更改或升级模板时，会创建该模板的新修订版。各个修订不能编辑。但是，如果要防止使用某个修订来创建新集群，则可以将其禁用。可以使用两种方式来使用模板修订：创建新集群，或升级使用较早版本的模板创建的集群。模板创建者可以设置默认修订版，但是最终用户创建集群时，他们可以选择任何模板以及可供使用的任何模板修订版。从指定的修订版创建集群后，就无法将其更改为另一个模板，但是可以将集群升级为同一模板的较新的可用修订版。模板所有者对模板修订版具有完全控制权，并且可以创建新的修订版来更新模板，删除或禁用不应被用于创建集群的修订版，和设置默认的模板修订版。
keywords:
  - rancher
  - rancher中文
  - rancher中文文档
  - rancher官网
  - rancher文档
  - Rancher
  - rancher 中文
  - rancher 中文文档
  - rancher cn
  - 系统管理员指南
  - RKE模板
  - 创建和修改模板
---

本节介绍如何管理 RKE 模板，您可以在**全局**视图下的**工具 > RKE 集群模板**中创建、共享、编辑或删除 RKE 模板。

模板更新通过修订系统进行处理。模板所有者想要更改或升级模板时，会创建该模板的新修订版。各个修订不能编辑。但是，如果要防止使用某个修订来创建新集群，则可以将其禁用。

可以使用两种方式来使用模板修订：创建新集群，或升级使用较早版本的模板创建的集群。模板创建者可以设置默认修订版，但是最终用户创建集群时，他们可以选择任何模板以及可供使用的任何模板修订版。从指定的修订版创建集群后，就无法将其更改为另一个模板，但是可以将集群升级为同一模板的较新的可用修订版。

模板所有者对模板修订版具有完全控制权，并且可以创建新的修订版来更新模板，删除或禁用不应被用于创建集群的修订版，和设置默认的模板修订版。

## 先决条件

用户需要有**创建 RKE 模板**权限，才可以**创建 RKE 模板**，该权限可以[由系统管理员配置](/docs/rancher2/admin-settings/rke-templates/creator-permissions/_index)。

如果您是模板的所有者，则可以修改、共享或删除模板，详情请参考[有关共享模板所有权的文档](/docs/rancher2/admin-settings/rke-templates/template-access-and-sharing/_index)。

## 创建模板

1. 在**全局**视图中，单击**工具 > RKE 集群模板**。
2. 单击**添加模板**。
3. 输入模板的**名称**。Rancher 为模板的第一个版本提供了自动生成的名称，您也可以按个人喜好修改名称，该名称随该模板一起创建。
4. 可选：通过[将其他用户或组添加为成员](/docs/rancher2/admin-settings/rke-templates/template-access-and-sharing/_index)与其他用户或组共享模板。您还可以将模板公开，以与 Rancher 中的所有用户共享。
5. 按照屏幕上的表单将集群配置参数保存为模板修订版的一部分。可以将该版本标记为该模板的默认版本。

**结果：** 配置了一个修订版的 RKE 模板。当您启动[RKE 集群](/docs/rancher2/cluster-provisioning/rke-clusters/_index)时，可以使用此 RKE 模板修订版。通过 RKE 模板管理集群后，集群无法解除与模板的绑定，并且无法取消选中**使用现有 RKE 模板和修订版**。

## 编辑模板

当现有模板不能满足业务需求时，您可以修改现有模板的配置参数，创建一个基于现有模板的修订版模板。创建修订版模板的过程和创建普通版的模板没有明显差别，请参考上文操作步骤。创建修订版模板与创建普通版的模板的区别如下：

- 创建修订版模板的过程中，修改的参数只对修订版模板有效，不对已有模板生效。
- 创建新的模板修订版后，使用现有模板的集群不受修订版影响，仍可正常使用。您可以继续使用该集群，或将该集群的模板升级为修订版。
- 只能创建现有模板的修订版，而不能基于修订版再创建修订版的修订版模板。
- 如果您创建了修订版，且暂时不需要用户使用该模板，您可以[禁用修订版](#禁用模板修订版)，禁止用户使用该模板。

1. 在**全局**视图中，单击**工具 > RKE 集群模板**。
2. 转到要编辑的模板，然后单击**垂直省略号(...) > 升级**。
3. 编辑所需的信息，然后单击**保存**。
4. 可选：您可以更改此模板的默认版本，也可以更改与谁共享。

**结果：** 模板已更新。要将其应用于使用较旧版本模板的集群，请参阅[升级集群以使用模板的新修订版](#升级集群以使用新修订版)。

## 删除模板

当不再需要对任何集群使用某个 RKE 模板时，可以将其删除。

1. 在**全局**视图中，单击**工具 > RKE 集群模板**。
2. 转到要删除的 RKE 模板，然后单击**垂直省略号(...) > 删除**。
3. 出现提示时，确认删除。

**结果：** 模板被删除。

## 基于默认版创建新修订版

您可以复制默认模板修订版并快速更新其设置，而无需从头开始创建新修订版。复制模板为您节省了重新输入集群创建所需的访问密钥和其他参数的时间。

1. 在**全局**视图中，单击**工具 > RKE 集群模板**。
2. 转到要复制的 RKE 模板，然后单击**垂直省略号(...) > 新修订的默认值**。
3. 完成表单的其余部分以创建新修订。

**结果：** 复制并配置了 RKE 模板修订版。

## 复制某个修订版

通过用户设置创建新的 RKE 模板修订版时，可以复制现有修订版并快速更新其设置，而无需从头开始创建新的修订版。复制模板修订版可省去重新输入集群参数的麻烦。

1. 在**全局**视图中，单击**工具 > RKE 集群模板**。
2. 转到要复制的模板修订版。然后选择**省略号>复制修订**。
3. 修改您需要改动的参数。

**结果：** 复制并配置了 RKE 模板修订版。设置集群后，可以在以后使用 RKE 模板修订版。使用此 RKE 模板的任何现有集群都可以升级到此新修订版。

## 禁用模板修订版

当您不需要将 RKE 模板修订版本用于创建新集群时，为了防止用户误触，可以禁用修订版模板。当您需要使用该模板时，您可以重新启用该模板。

1. 在**全局**视图中，单击**工具 > RKE 集群模板**。
2. 转到要禁用的模板修订版。然后单击**省略号 > 禁用**，禁用该模板。

**结果：** RKE 模板修订版不能用于创建新集群。

## 重新启用修订版模板

如果您决定应该使用禁用的 RKE 模板修订版来创建新集群，您可以重新启用该模板。

1. 在**全局**视图中，单击**工具 > RKE 集群模板**。
2. 转到您要重新启用的模板修订版。然后选择**省略号>启用**。

**结果：** RKE 模板修订版可用于创建新集群。

## 将模板修订版设置为默认版本

最终用户使用 RKE 模板创建集群时，用户可以选择用于创建集群的版本。您可以配置默认使用哪个修订版。

1. 在**全局**视图中，单击**工具 > RKE 集群模板**。
2. 转到应该为默认值的 RKE 模板修订，然后单击**省略号(...) > 设置为缺省**。

**结果：** 当使用模板创建集群时，RKE 模板修订版将用作默认选项。

## 删除模板修订版

您可以删除模板的所有修订版（默认修订版除外）。

1. 在**全局**视图中，单击**工具 > RKE 集群模板**。
2. 转到应删除的 RKE 模板修订，然后单击**省略号(...) > 删除**。

**结果：** RKE 模板修订已删除。

## 升级集群以使用新修订版

> 本节假定您已经有一个集群，其中该集群[已应用 RKE 模板](/docs/rancher2/admin-settings/rke-templates/applying-templates/_index)。
> 本节还假设您已经[更新了集群使用的模板](#更新模板)，以便可以使用新的模板修订版。

升级集群以使用新修订版的前提条件是：

- 已有使用默认模板创建的集群。
- 已有基于默认模板创建的修订版模板。

1. 从 Rancher 的**全局**视图中，单击**集群**选项卡。
2. 转到要升级的集群，然后单击**省略号(...) > 编辑**。
3. 在**集群选项**部分中，单击模板修订的下拉菜单，然后选择新的模板修订。
4. 单击**保存**。

**结果：** 集群已升级为使用新模板修订版中定义的设置。

## 从已有集群中导出到新的 RKE 模板并进行修订

您可以将现有集群的设置另存为 RKE 模板。这会将集群的设置导出为新的 RKE 模板，并且将集群绑定到该模板。然后，只有在[更新了 RKE 模板](/docs/rancher2/admin-settings/rke-templates/creating-and-revising/_index)且集群将升级到较新版本的模板时才可以修改集群。

1. 从 Rancher 的**全局**视图中，单击**集群**选项卡。
2. 转到将转换为使用 RKE 模板的集群。单击**省略号(...) > 另存为 RKE 模板**。
3. 在显示的表单中输入模板的名称，然后单击**创建**。

**结果：**

- 创建了一个新的 RKE 模板。
- 将集群转换为使用该新模板。
- 可以[从新模板和修订版中创建新集群](/docs/rancher2/admin-settings/rke-templates/applying-templates/_index)。
